var email=document.getElementById("email"),password=document.getElementById("password"),confirm_password=document.getElementById("confirm_password");function validateMatchingPasswords(){password.value!=confirm_password.value?confirm_password.setCustomValidity("New Password Fields Must Match"):confirm_password.setCustomValidity("")}function getQueryParams(e){e=e.split("+").join(" ");for(var r,a={},t=/[?&]?([^=]+)=([^&]*)/g;r=t.exec(e);)a[decodeURIComponent(r[1])]=decodeURIComponent(r[2]);return a}password.onchange=validateMatchingPasswords,confirm_password.onkeyup=validateMatchingPasswords;var query=window.location.search.substring(1),queryParams=getQueryParams(query);function formSubmit(){document.getElementById("submit").disabled=!0,document.getElementById("form-result").innerHTML="<img src='../images/loading-gear.gif' alt='loading...'>",setTimeout(function(){var e=document.getElementById("password").value,r=document.getElementById("form-result");xhr=new XMLHttpRequest;var a=queryParams.callbackUrl;xhr.open("POST",a,!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=JSON.parse(xhr.responseText);e.error?(r.style.color="red",r.innerHTML="Server timed out.\nPlease try again in a few minutes.",document.getElementById("submit").disabled=!1,console.error(e.error)):document.getElementById("form-result").innerHTML="Password Changed Successfully"}else r.style.color="red",r.innerHTML="Server timed out.\nPlease try again in a few minutes.",document.getElementById("submit").disabled=!1};var t="email="+queryParams.email+"&passwordResetToken="+queryParams.passwordResetToken+"&newPassword="+e+"&callbackUrl="+queryParams.callbackUrl;xhr.send(t)},1e3)}email.setAttribute("value",queryParams.email);